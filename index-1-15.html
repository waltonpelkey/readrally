<!DOCTYPE html>

<html>

<head>
    <link rel="stylesheet" type="text/css" href="style.css" />
</head>

<body>

    <header>
        <nav>

            <ul>
                <li>
                    <div class="logo"> &#128214;Read Rally&#128214;</div>
                </li>
                <li>
                    <div class="dropdown">
                        <button>Menu</button>
                        <div class="content">
                            <a href="login.html">Logout</a>
                        </div>
                    </div>
                </li>
            </ul>
        </nav>
        </div>
    </header>
    <ul>
        <li id="menu">
            <div class="rectangle">
                YOUR PROMPTS
            </div>

        </li>
        <li>
            <div class="game-board-5">
                <div class="start-box">START</div>
                <div class="box random-prompt-box" onclick="addtoList(event)"></div>
                <div class="box random-prompt-box" onclick="addtoList(event)"></div>
                <div class="box random-prompt-box" onclick="addtoList(event)"></div>
                <div class="box random-prompt-box" onclick="addtoList(event)"></div>
                <div class="empty-box"></div>
                <div class="empty-box"></div>
                <div class="empty-box"></div>
                <div class="empty-box"></div>
                <div class="box random-prompt-box" onclick="addtoList(event)"></div>
                <div class="box random-prompt-box" onclick="addtoList(event)"></div>
                <div class="box random-prompt-box" onclick="addtoList(event)"></div>
                <div class="box random-prompt-box" onclick="addtoList(event)"></div>
                <div class="box random-prompt-box" onclick="addtoList(event)"></div>
                <div class="box random-prompt-box" onclick="addtoList(event)"></div>
                <div class="box random-prompt-box" onclick="addtoList(event)"></div>
                <div class="empty-box"></div>
                <div class="empty-box"></div>
                <div class="empty-box"></div>
                <div class="empty-box"></div>
                <div class="box random-prompt-box" onclick="addtoList(event)"></div>
                <div class="box random-prompt-box" onclick="addtoList(event)"></div>
                <div class="box random-prompt-box" onclick="addtoList(event)"></div>
                <div class="box random-prompt-box" onclick="addtoList(event)"></div>
                <div class="end-box">FINISH</div>
            </div>
        </li>
        <li>
            <div class="dice-container">
            </div>
            <button type="button" class="btn-roll-dice" style="left: 83vw;">Roll Dice</button>
        </li>
    </ul>

    <button class="quitgame" onclick="location.href='startpage-1-15.html';">Quit Game</button>

    <script>
        var movementList = [-1, 0, 1, 2, 3, 4, 9, 8, 7, 6, 5, 10, 11, 12, 13, 14];

        const categories = [
            { color: '#DCF4F0', text: 'COTTAGECORE', href: 'promptpages/cottagecore/cottagecore1.html' },
            { color: '#DCF4F0', text: 'COTTAGECORE', href: 'promptpages/cottagecore/cottagecore2.html' },
            { color: '#DCF4F0', text: 'COTTAGECORE', href: 'promptpages/cottagecore/cottagecore3.html' },
            { color: '#DCF4F0', text: 'COTTAGECORE', href: 'promptpages/cottagecore/cottagecore4.html' },
            { color: '#DCF4F0', text: 'COTTAGECORE', href: 'promptpages/cottagecore/cottagecore5.html' },
            { color: '#FFCDCC', text: 'CHALLENGE YOURSELF', href: 'promptpages/challenge/challenge1.html' },
            { color: '#FFCDCC', text: 'CHALLENGE YOURSELF', href: 'promptpages/challenge/challenge2.html' },
            { color: '#FFCDCC', text: 'CHALLENGE YOURSELF', href: 'promptpages/challenge/challenge3.html' },
            { color: '#FFCDCC', text: 'CHALLENGE YOURSELF', href: 'promptpages/challenge/challenge4.html' },
            { color: '#FFCDCC', text: 'CHALLENGE YOURSELF', href: 'promptpages/challenge/challenge5.html' },
            { color: '#EEEBE2', text: 'EASY', href: 'promptpages/easy/easy1.html' },
            { color: '#EEEBE2', text: 'EASY', href: 'promptpages/easy/easy2.html' },
            { color: '#EEEBE2', text: 'EASY', href: 'promptpages/easy/easy3.html' },
            { color: '#EEEBE2', text: 'EASY', href: 'promptpages/easy/easy4.html' },
            { color: '#EEEBE2', text: 'EASY', href: 'promptpages/easy/easy5.html' },
            { color: '#C5ECDB', text: 'ACADEMIA', href: 'promptpages/academia/academia1.html' },
            { color: '#C5ECDB', text: 'ACADEMIA', href: 'promptpages/academia/academia2.html' },
            { color: '#C5ECDB', text: 'ACADEMIA', href: 'promptpages/academia/academia3.html' },
            { color: '#C5ECDB', text: 'ACADEMIA', href: 'promptpages/academia/academia4.html' },
            { color: '#C5ECDB', text: 'ACADEMIA', href: 'promptpages/academia/academia5.html' },
            { color: '#ccffcd', text: 'FOOD', href: 'promptpages/food/food1.html' },
            { color: '#ccffcd', text: 'FOOD', href: 'promptpages/food/food2.html' },
            { color: '#ccffcd', text: 'FOOD', href: 'promptpages/food/food3.html' },
            { color: '#ccffcd', text: 'FOOD', href: 'promptpages/food/food4.html' },
            { color: '#ccffcd', text: 'FOOD', href: 'promptpages/food/food5.html' },
            { color: '#f0dcf4', text: 'COLOR', href: 'promptpages/color/color1.html' },
            { color: '#f0dcf4', text: 'COLOR', href: 'promptpages/color/color2.html' },
            { color: '#f0dcf4', text: 'COLOR', href: 'promptpages/color/color3.html' },
            { color: '#f0dcf4', text: 'COLOR', href: 'promptpages/color/color4.html' },
            { color: '#f0dcf4', text: 'COLOR', href: 'promptpages/color/color5.html' },
            { color: '#f4f0dc', text: 'EMOTIONAL', href: 'promptpages/emotional/emotional1.html' },
            { color: '#f4f0dc', text: 'EMOTIONAL', href: 'promptpages/emotional/emotional2.html' },
            { color: '#f4f0dc', text: 'EMOTIONAL', href: 'promptpages/emotional/emotional3.html' },
            { color: '#f4f0dc', text: 'EMOTIONAL', href: 'promptpages/emotional/emotional4.html' },
            { color: '#f4f0dc', text: 'EMOTIONAL', href: 'promptpages/emotional/emotional5.html' },
            { color: '#80B9BC', text: 'DARK', href: 'promptpages/dark/dark1.html' },
            { color: '#80B9BC', text: 'DARK', href: 'promptpages/dark/dark2.html' },
            { color: '#80B9BC', text: 'DARK', href: 'promptpages/dark/dark3.html' },
            { color: '#80B9BC', text: 'DARK', href: 'promptpages/dark/dark4.html' },
            { color: '#80B9BC', text: 'DARK', href: 'promptpages/dark/dark5.html' },
            { color: '#cdccff', text: 'RELAXING', href: 'promptpages/relaxing/relaxing1.html' },
            { color: '#cdccff', text: 'RELAXING', href: 'promptpages/relaxing/relaxing2.html' },
            { color: '#cdccff', text: 'RELAXING', href: 'promptpages/relaxing/relaxing3.html' },
            { color: '#cdccff', text: 'RELAXING', href: 'promptpages/relaxing/relaxing4.html' },
            { color: '#cdccff', text: 'RELAXING', href: 'promptpages/relaxing/relaxing5.html' },
            { color: '#bc80b9', text: 'MYSTERIOUS', href: 'promptpages/mysterious/mysterious1.html' },
            { color: '#bc80b9', text: 'MYSTERIOUS', href: 'promptpages/mysterious/mysterious2.html' },
            { color: '#bc80b9', text: 'MYSTERIOUS', href: 'promptpages/mysterious/mysterious3.html' },
            { color: '#bc80b9', text: 'MYSTERIOUS', href: 'promptpages/mysterious/mysterious4.html' },
            { color: '#bc80b9', text: 'MYSTERIOUS', href: 'promptpages/mysterious/mysterious5.html' },
            { color: '#b9bc80', text: 'NUMBERS', href: 'promptpages/numbers/numbers1.html' },
            { color: '#b9bc80', text: 'NUMBERS', href: 'promptpages/numbers/numbers2.html' },
            { color: '#b9bc80', text: 'NUMBERS', href: 'promptpages/numbers/numbers3.html' },
            { color: '#b9bc80', text: 'NUMBERS', href: 'promptpages/numbers/numbers4.html' },
            { color: '#b9bc80', text: 'NUMBERS', href: 'promptpages/numbers/numbers5.html' },
            { color: '#ecdbc5', text: 'AROUND THE WORLD', href: 'promptpages/world/world1.html' },
            { color: '#ecdbc5', text: 'AROUND THE WORLD', href: 'promptpages/world/world2.html' },
            { color: '#ecdbc5', text: 'AROUND THE WORLD', href: 'promptpages/world/world3.html' },
            { color: '#ecdbc5', text: 'AROUND THE WORLD', href: 'promptpages/world/world4.html' },
            { color: '#ecdbc5', text: 'AROUND THE WORLD', href: 'promptpages/world/world5.html' },
        ];

        function getRandomCategory() {
            const randomCategory = Math.floor(Math.random() * categories.length);
            return categories[randomCategory];
        }

        function generateRandomPrompt() {
            const promptBoxes = document.querySelectorAll('.random-prompt-box');
            promptBoxes.forEach(promptBox => {
                const randomCategory = getRandomCategory();
                promptBox.style.backgroundColor = randomCategory.color;
                promptBox.innerHTML = `<a href="${randomCategory.href}"  style="color: black; text-decoration: none; font-size: 18px;">${randomCategory.text}</a>`;
            })
        }

        function addtoList(event) {
            const target = event.target.closest(".random-prompt-box");
            if (!target) return;

            // Extract the link and other attributes from the clicked box
            const linkElement = target.querySelector("a");
            const linkHref = linkElement.href;
            const linkText = linkElement.innerText;
            const backgroundColor = target.style.backgroundColor;

            // Add the prompt to the menu if not already added by this box
            const menu = document.getElementById("menu");
            const existingItems = [...menu.children].filter((child) => child.classList.contains("rectangle"));

            // Check if the clicked box already added this item
            if (target.hasAttribute("data-clicked")) {
                console.log("Prompt already added from this box");
                return;
            }

            // Add the prompt to the menu
            const p = document.createElement("a");
            p.setAttribute("class", "rectangle");
            p.innerText = linkText;
            p.href = linkHref;
            p.style.backgroundColor = backgroundColor;

            menu.appendChild(p);

            // Mark the box as clicked to prevent adding the same prompt from this box
            target.setAttribute("data-clicked", "true");
            target.style.pointerEvents = "none";
            target.style.opacity = "0.5";

            // Navigate to the prompt page if the box was clicked
            if (event.target.tagName !== "A") {
                window.location.assign(linkHref);
            }
        }



        generateRandomPrompt();

        function createDice(number, value) {
            var dotPositionMatrix = {
                1: [
                    [50, 50]
                ],
                2: [
                    [20, 20],
                    [80, 80]
                ],
                3: [
                    [20, 20],
                    [50, 50],
                    [80, 80]
                ],
                4: [
                    [20, 20],
                    [20, 80],
                    [80, 20],
                    [80, 80]
                ],
                5: [
                    [20, 20],
                    [20, 80],
                    [50, 50],
                    [80, 20],
                    [80, 80]
                ],
                6: [
                    [20, 20],
                    [20, 80],
                    [50, 20],
                    [50, 80],
                    [80, 20],
                    [80, 80]
                ]
            }

            var dice = document.createElement("div");
            var valueText = document.createElement("div");

            for (var dotPosition of dotPositionMatrix[number]) {
                var dot = document.createElement("div");

                dot.classList.add("dice-dot");
                dot.style.setProperty("--top", dotPosition[0] + "%");
                dot.style.setProperty("--left", dotPosition[1] + "%");
                dice.appendChild(dot);
            }

            dice.classList.add("dice");

            valueText.textContent = value;
            valueText.style.opacity = "0";
            valueText.classList.add("dice-value");
            dice.appendChild(valueText);

            return dice;
        }

        let currentPositionIndex = 0;
        var currentPosition = -1;
        var NUMBER_OF_DICE = 1;
        var diceContainer = document.querySelector(".dice-container");
        var btnRollDice = document = document.querySelector(".btn-roll-dice");

        btnRollDice.addEventListener("click", () => {
            randomizeDice(diceContainer, NUMBER_OF_DICE);
        });

        function randomizeDice(diceContainer, numberOfDice) {
            diceContainer.innerHTML = "";
            for (let i = 0; i < numberOfDice; i++) {
                /* this is the value of the dice roll */
                var random = Math.floor((Math.random() * 6) + 1);
                var dice = createDice(random, random);

                diceContainer.appendChild(dice);

                currentPositionIndex += random;
            }
            if (movementList[currentPositionIndex] != undefined) {
                var currentPositionOnBoard = movementList[currentPositionIndex];


                var box = document.querySelectorAll('.box');

                if (currentPositionOnBoard >= 0) {
                    box[currentPositionOnBoard].classList.add('glow');
                }
            }
            else {
                endgame();
            }
        }

        function endgame() {

            var box = document.querySelector('.end-box');

            box.classList.add('glow');


            for (elm of document.getElementsByClassName("btn-roll-dice")) {
                elm.setAttribute("hidden", "hidden");
            }
            diceContainer.children[0].setAttribute("hidden", "hidden");
        }
    </script>

</body>
<footer>CS3041: Human-Computer Interaction</footer>

</html>